/*
 * catberry-project: 0.0.0
 * Build Date: Tue Feb 09 2016 12:20:53 GMT+0800 (IRKT)
 */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function a(){h.call(this,f)}var b=[{name:"Main",constructor:require("./catberry_stores/Main.js")}],c=[{name:"document",constructor:require("./catberry_components/document/Document.js"),properties:{name:"document",template:"./document.jade",logic:"./Document.js"},templateSource:'function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push("<!DOCTYPE html><html><head></head><body><cat-hello-world id=\\"unique\\" cat-store=\\"Main\\"></cat-hello-world></body></html>");;return buf.join("");\n}',errorTemplateSource:null},{name:"head",constructor:require("./catberry_components/head/Head.js"),properties:{name:"head",template:"./head.jade",logic:"./Head.js"},templateSource:'function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (title) {\nbuf.push("<meta charset=\\"UTF-8\\"/><title>" + (jade.escape((jade_interp = title) == null ? \'\' : jade_interp)) + "</title><script src=\\"bundle.js\\"></script>");}.call(this,"title" in locals_for_with?locals_for_with.title:typeof title!=="undefined"?title:undefined));;return buf.join("");\n}',errorTemplateSource:null},{name:"hello-world",constructor:require("./catberry_components/hello-world/HelloWorld.js"),properties:{name:"hello-world",template:"./hello.jade",errorTemplate:"./error.jade",logic:"./HelloWorld.js"},templateSource:'function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push("<h1>See console</h1><p>If you click the links below at the console will be duplicates of \\"CALL MAP\\"</p><br/><a href=\\"/page1\\">Page number 1</a><a href=\\"/page2\\">Page number 2</a><a href=\\"/page3\\">Page number 3</a>");;return buf.join("");\n}',errorTemplateSource:'function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\n;return buf.join("");\n}'}],d=require("util"),e=require("./routes.js")||[],f=require("./node_modules/catberry/browser/Catberry.js"),g=require("./node_modules/catberry/browser/Logger.js"),h=require("./node_modules/catberry/lib/base/BootstrapperBase.js"),i=require("./node_modules/catberry/lib/StoreDispatcher"),j=require("./node_modules/catberry/browser/providers/ModuleApiProvider"),k=require("./node_modules/catberry/browser/CookieWrapper"),l="Document updated (%d store(s) changed)",m='Component "%s" is bound',n='Component "%s" is unbound';d.inherits(a,h),a.prototype.configure=function(a,d){h.prototype.configure.call(this,a,d),"Promise"in window||(window.Promise=d.resolve("promise")),d.register("storeDispatcher",i,a,!0),d.register("moduleApiProvider",j,a,!0),d.register("cookieWrapper",k,a,!0),d.registerInstance("window",window);var f=a.logger||{},l=new g(f.levels);d.registerInstance("logger",l),window.onerror=function(a,b,c){return l.fatal(b+":"+c+" "+a),!0};var m=d.resolve("eventBus");this._wrapEventsWithLogger(a,m,l),e.forEach(function(a){d.registerInstance("routeDefinition",a)}),b.forEach(function(a){d.registerInstance("store",a)}),c.forEach(function(a){d.registerInstance("component",a)})},a.prototype._wrapEventsWithLogger=function(a,b,c){h.prototype._wrapEventsWithLogger.call(this,a,b,c);var e=Boolean(a.isRelease);e||b.on("documentUpdated",function(a){c.debug(d.format(l,a.length))}).on("componentBound",function(a){c.debug(d.format(m,a.element.tagName+(a.id?"#"+a.id:"")))}).on("componentUnbound",function(a){c.debug(d.format(n,a.element.tagName+(a.id?"#"+a.id:"")))})},module.exports=new a;
},{"./catberry_components/document/Document.js":3,"./catberry_components/head/Head.js":4,"./catberry_components/hello-world/HelloWorld.js":5,"./catberry_stores/Main.js":6,"./node_modules/catberry/browser/Catberry.js":25,"./node_modules/catberry/browser/CookieWrapper":26,"./node_modules/catberry/browser/Logger.js":28,"./node_modules/catberry/browser/providers/ModuleApiProvider":33,"./node_modules/catberry/lib/StoreDispatcher":37,"./node_modules/catberry/lib/base/BootstrapperBase.js":38,"./routes.js":64,"util":63}],2:[function(require,module,exports){
"use strict";var a=require("catberry"),b=require("catberry-jade"),c=require("./config/environment.json"),d=a.create(c);b.register(d.locator),d.startWhenReady();
},{"./config/environment.json":7,"catberry":34,"catberry-jade":12}],3:[function(require,module,exports){
"use strict";function a(){}module.exports=a;
},{}],4:[function(require,module,exports){
"use strict";function a($config){this._config=$config}module.exports=a,a.prototype._config=null,a.prototype.render=function(){return this._config};
},{}],5:[function(require,module,exports){
"use strict";function a(){}module.exports=a,a.prototype.render=function(){return this.$context.getStoreData()};
},{}],6:[function(require,module,exports){
"use strict";function a(){}module.exports=a,a.prototype.load=function(){return{who:"World"}};
},{}],7:[function(require,module,exports){
module.exports={
	"title": "Catberry Project"
}

},{}],8:[function(require,module,exports){
"use strict";function a(){if(f.length)throw f.shift()}function b(a){var b;b=e.length?e.pop():new c,b.task=a,d(b)}function c(){this.task=null}var d=require("./raw"),e=[],f=[],g=d.makeRequestCallFromTimer(a);module.exports=b,c.prototype.call=function(){try{this.task.call()}catch(a){b.onerror?b.onerror(a):(f.push(a),g())}finally{this.task=null,e[e.length]=this}};
},{"./raw":9}],9:[function(require,module,exports){
(function (global){
"use strict";function a(a){e.length||(g(),f=!0),e[e.length]=a}function b(){for(;h<e.length;){var a=h;if(h+=1,e[a].call(),h>i){for(var b=0,c=e.length-h;c>b;b++)e[b]=e[b+h];e.length-=h,h=0}}e.length=0,h=0,f=!1}function c(a){var b=1,c=new j(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function d(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}module.exports=a;var e=[],f=!1,g,h=0,i=1024,j=global.MutationObserver||global.WebKitMutationObserver;g="function"==typeof j?c(b):d(b),a.requestFlush=g,a.makeRequestCallFromTimer=d;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],10:[function(require,module,exports){
(function (process,global){
function a(a){var d=.001*c.call(b),e=Math.floor(d),f=Math.floor(d%1*1e9);return a&&(e-=a[0],f-=a[1],0>f&&(e--,f+=1e9)),[e,f]}module.exports=process.hrtime||a;var b=global.performance||{},c=b.now||b.mozNow||b.msNow||b.oNow||b.webkitNow||function(){return(new Date).getTime()};
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":53}],11:[function(require,module,exports){
"use strict";function a($jade){this._jade=$jade,this._templates=Object.create(null)}module.exports=a,a.prototype._jade=null,a.prototype._templates=null,a.prototype.registerCompiled=function(a,b){var c=new Function("jade","return "+b+";");this._templates[a]=c(this._jade)},a.prototype.render=function(a,b){if(!(a in this._templates))return Promise.reject(new Error("No such template"));var c;try{c=Promise.resolve(this._templates[a](b))}catch(d){c=Promise.reject(d)}return c};
},{}],12:[function(require,module,exports){
"use strict";var a=require("jade"),b=require("./lib/TemplateProvider");module.exports={register:function(c,d){d=d||{},c.registerInstance("jade",a),c.register("templateProvider",b,d,!0)},Jade:a,TemplateProvider:b};
},{"./lib/TemplateProvider":11,"jade":13}],13:[function(require,module,exports){
(function (global){
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jade=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return null!=a&&""!==a}function e(a){return(Array.isArray(a)?a.map(e):a&&"object"==typeof a?Object.keys(a).filter(function(b){return a[b]}):[a]).filter(d).join(" ")}function f(a){return h[a]||a}function g(a){var b=String(a).replace(i,f);return b===""+a?a:b}c.merge=function j(a,b){if(1===arguments.length){for(var c=a[0],e=1;e<a.length;e++)c=j(c,a[e]);return c}var f=a["class"],g=b["class"];(f||g)&&(f=f||[],g=g||[],Array.isArray(f)||(f=[f]),Array.isArray(g)||(g=[g]),a["class"]=f.concat(g).filter(d));for(var h in b)"class"!=h&&(a[h]=b[h]);return a},c.joinClasses=e,c.cls=function(a,b){for(var d=[],f=0;f<a.length;f++)b&&b[f]?d.push(c.escape(e([a[f]]))):d.push(e(a[f]));var g=e(d);return g.length?' class="'+g+'"':""},c.style=function(a){return a&&"object"==typeof a?Object.keys(a).map(function(b){return b+":"+a[b]}).join(";"):a},c.attr=function(a,b,d,e){return"style"===a&&(b=c.style(b)),"boolean"==typeof b||null==b?b?" "+(e?a:a+'="'+a+'"'):"":0==a.indexOf("data")&&"string"!=typeof b?(-1!==JSON.stringify(b).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),b&&"function"==typeof b.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+a+"='"+JSON.stringify(b).replace(/'/g,"&apos;")+"'"):d?(b&&"function"==typeof b.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+a+'="'+c.escape(b)+'"'):(b&&"function"==typeof b.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+a+'="'+b+'"')},c.attrs=function(a,b){var d=[],f=Object.keys(a);if(f.length)for(var g=0;g<f.length;++g){var h=f[g],i=a[h];"class"==h?(i=e(i))&&d.push(" "+h+'="'+i+'"'):d.push(c.attr(h,i,!1,b))}return d.join("")};var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},i=/[&<>"]/g;c.escape=g,c.rethrow=function k(b,c,d,e){if(!(b instanceof Error))throw b;if(!("undefined"==typeof window&&c||e))throw b.message+=" on line "+d,b;try{e=e||a("fs").readFileSync(c,"utf8")}catch(f){k(b,null,d)}var g=3,h=e.split("\n"),i=Math.max(d-g,0),j=Math.min(h.length,d+g),g=h.slice(i,j).map(function(a,b){var c=b+i+1;return(c==d?"  > ":"    ")+c+"| "+a}).join("\n");throw b.path=c,b.message=(c||"Jade")+":"+d+"\n"+g+"\n\n"+b.message,b},c.DebugItem=function(a,b){this.lineno=a,this.filename=b}},{fs:2}],2:[function(a,b,c){},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],14:[function(require,module,exports){
"use strict";function a(a){this._source=String(a||"")}module.exports=a;var b={ILLEGAL:-1,NO:0,IDENTIFIER:1,FUNCTION:2,PARENTHESES_OPEN:3,PARENTHESES_CLOSE:4,COMMA:5,END:6};a.STATES=b;var c={FUNCTION:"function"},d=/^\s$/,e=/^[\$\w]$/;a.prototype._source="",a.prototype._currentIndex=0,a.prototype._currentEnd=0,a.prototype._currentState=b.NO,a.prototype.next=function(){if(this._currentState===b.ILLEGAL||this._currentState===b.END)return{state:this._currentState,start:this._currentIndex,end:this._currentIndex+1};var a=this._currentIndex,d=this._currentState;switch(this._currentState){case b.PARENTHESES_OPEN:this.parenthesesOpenState();break;case b.PARENTHESES_CLOSE:this.parenthesesCloseState();break;case b.IDENTIFIER:this.identifierState();break;case b.COMMA:this.commaState();break;case b.FUNCTION:this.functionState();break;default:this.skipWhitespace();var e=this._source.substr(this._currentIndex,c.FUNCTION.length);if(e===c.FUNCTION)return this._currentState=b.FUNCTION,this.next();d=b.ILLEGAL}return{state:d,start:a,end:this._currentEnd}},a.prototype.skipWhitespace=function(){for(;this._currentIndex<this._source.length&&d.test(this._source[this._currentIndex]);)this._currentIndex++},a.prototype.parenthesesOpenState=function(){this._currentIndex++,this._currentEnd=this._currentIndex,this.skipWhitespace(),e.test(this._source[this._currentIndex])?this._currentState=b.IDENTIFIER:")"===this._source[this._currentIndex]?this._currentState=b.PARENTHESES_CLOSE:this._currentState=b.ILLEGAL},a.prototype.parenthesesCloseState=function(){this._currentIndex++,this._currentEnd=this._currentIndex,this._currentState=b.END},a.prototype.functionState=function(){this._currentIndex+=c.FUNCTION.length,this._currentEnd=this._currentIndex,this.skipWhitespace(),"("===this._source[this._currentIndex]?this._currentState=b.PARENTHESES_OPEN:e.test(this._source[this._currentIndex])?this._currentState=b.IDENTIFIER:this._currentState=b.ILLEGAL},a.prototype.identifierState=function(){for(;this._currentIndex<this._source.length&&e.test(this._source[this._currentIndex]);)this._currentIndex++;this._currentEnd=this._currentIndex,this.skipWhitespace(),"("===this._source[this._currentIndex]?this._currentState=b.PARENTHESES_OPEN:")"===this._source[this._currentIndex]?this._currentState=b.PARENTHESES_CLOSE:","===this._source[this._currentIndex]?this._currentState=b.COMMA:this._currentState=b.ILLEGAL},a.prototype.commaState=function(){return this._currentIndex++,this._currentEnd=this._currentIndex,this.skipWhitespace(),e.test(this._source[this._currentIndex])?void(this._currentState=b.IDENTIFIER):void(this._currentState=b.ILLEGAL)};
},{}],15:[function(require,module,exports){
"use strict";function a(){this._registrations=Object.create(null)}function b(a,b){a in b._registrations||(b._registrations[a]=[])}function c(a,b){if(!(b in a)||0===a[b].length)throw new Error(j.format(n,b))}function d(a){if(!(a instanceof Function))throw new Error(m)}function e(a){if("string"!=typeof a)throw new Error(j.format(o,a))}function f(a,b){if(a.isSingleton&&null!==a.singleInstance)return a.singleInstance;var c=g(a,b),d=Object.create(a.constructor.prototype);return a.constructor.apply(d,c),a.isSingleton&&(a.singleInstance=d),d}function g(a,b){return a.parameterNames.map(function(b){var c=h(b);return null===c?a.parameters[b]:this.resolve(c)},b)}function h(a){return l.test(a)?a.substr(1,a.length-1):null}function i(a){for(var b=a.toString(),c=new k(b),d=[],e={state:k.STATES.NO,start:0,end:0},f=!1;e.state!==k.STATES.END&&e.state!==k.STATES.ILLEGAL;)e=c.next(),e.state===k.STATES.PARENTHESES_OPEN&&(f=!0),f&&e.state===k.STATES.IDENTIFIER&&d.push(b.substring(e.start,e.end));return d}module.exports=a;var j=require("util"),k=require("./ConstructorTokenizer"),l=/^\$\w+/,m="Constructor should be a function",n='Type "%s" not registered',o='Type name "%s" should be a string';a.prototype._registrations=null,a.prototype.register=function(a,c,f,g){d(c),e(a),b(a,this);var h=i(c);this._registrations[a].unshift({constructor:c,parameters:f||{},parameterNames:h,isSingleton:Boolean(g),singleInstance:null})},a.prototype.registerInstance=function(a,c){e(a),b(a,this),this._registrations[a].unshift({constructor:c.constructor,parameters:{},parameterNames:[],isSingleton:!0,singleInstance:c})},a.prototype.resolve=function(a){e(a),c(this._registrations,a);var b=this._registrations[a][0];return f(b,this)},a.prototype.resolveAll=function(a){e(a);try{c(this._registrations,a)}catch(b){return[]}return this._registrations[a].map(function(a){return f(a,this)},this)},a.prototype.resolveInstance=function(a,b){return f({constructor:a,parameters:b||{},parameterNames:i(a),isSingleton:!1,singleInstance:null},this)},a.prototype.unregister=function(a){e(a),delete this._registrations[a]};
},{"./ConstructorTokenizer":14,"util":63}],16:[function(require,module,exports){
"use strict";function a($window){c.call(this),this.window=$window}function b(a){var b={};return a?(a.getAllResponseHeaders().split("\n").forEach(function(a){var c=a.indexOf(":");if(!(0>=c)){var d=a.substring(0,c).trim().toLowerCase();b[d]=a.substring(c+1).trim()}}),{code:1223===a.status?204:a.status,text:1223===a.status?"No Content":a.statusText,headers:b}):{code:0,text:"",headers:b}}module.exports=a;var c=require("../lib/UHRBase"),d=require("promise"),e=require("catberry-uri").URI,f=require("util");"Promise"in window||(window.Promise=d),f.inherits(a,c);var g={cookie:!0,"accept-charset":!0},h="Connection error",i="Request timeout",j="Request aborted";a.prototype.window=null,a.prototype._doRequest=function(a){var c=this;return Object.keys(a.headers).forEach(function(b){g.hasOwnProperty(b.toLowerCase())&&delete a.headers[b]}),new d(function(d,e){var f=null,g=new c.window.XMLHttpRequest;g.onabort=function(){f=new Error(j),e(f)},g.ontimeout=function(){f=new Error(i),e(f)},g.onerror=function(){f=new Error(g.statusText||h),e(f)},g.onreadystatechange=function(){if(4===g.readyState&&!f){var a=b(g),e=c.convertResponse(a.headers,g.responseText);d({status:a,content:e})}};var k=a.uri.authority.userInfo?a.uri.authority.userInfo.user:null,l=a.uri.authority.userInfo?a.uri.authority.userInfo.password:null;g.open(a.method,a.uri.toString(),!0,k||void 0,l||void 0),g.timeout=a.timeout,a.withCredentials&&(g.withCredentials=!0),Object.keys(a.headers).forEach(function(b){g.setRequestHeader(b,a.headers[b])}),g.send(a.data)})};
},{"../lib/UHRBase":18,"catberry-uri":19,"promise":54,"util":63}],17:[function(require,module,exports){
"use strict";var a=require("./lib/UHR");module.exports={register:function(b){var c=b.resolve("config");b.register("uhr",a,c,!0)},UHR:a};
},{"./lib/UHR":16}],18:[function(require,module,exports){
"use strict";function a(){}function b(a){var b="",c="Content-Type";Object.keys(a).forEach(function(d){"content-type"===d.toLowerCase()&&(c=d,b=a[d])});var d=b.split(";"),e=d[0].toLowerCase();return{name:c,type:e}}module.exports=a;var c=require("catberry-uri"),d=c.Query,e=c.URI,f="Protocol is unsupported",g="Request parameters should be object",h="URL is required parameter",i="Request method is required parameter",j="Host in URL is required",k="Scheme in URL is required",l="Timeout should be a number",m=3e4,n=/^(http)s?$/i,o={GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE",OPTIONS:"OPTIONS",TRACE:"TRACE",CONNECT:"CONNECT"};a.TYPES={URL_ENCODED:"application/x-www-form-urlencoded",JSON:"application/json",PLAIN_TEXT:"text/plain",HTML:"text/html"},a.CHARSET="UTF-8",a.DEFAULT_GENERAL_HEADERS={Accept:a.TYPES.JSON+"; q=0.7, "+a.TYPES.HTML+"; q=0.2, "+a.TYPES.PLAIN_TEXT+"; q=0.1","Accept-Charset":a.CHARSET+"; q=1"},a.CHARSET_PARAMETER="; charset="+a.CHARSET,a.URL_ENCODED_ENTITY_CONTENT_TYPE=a.TYPES.URL_ENCODED+a.CHARSET_PARAMETER,a.JSON_ENTITY_CONTENT_TYPE=a.TYPES.JSON+a.CHARSET_PARAMETER,a.PLAIN_TEXT_ENTITY_CONTENT_TYPE=a.TYPES.PLAIN_TEXT+a.CHARSET_PARAMETER,a.prototype.get=function(a,b){b=b||{};var c=Object.create(b);return c.method=o.GET,c.url=a,this.request(c)},a.prototype.post=function(a,b){b=b||{};var c=Object.create(b);return c.method=o.POST,c.url=a,this.request(c)},a.prototype.put=function(a,b){b=b||{};var c=Object.create(b);return c.method=o.PUT,c.url=a,this.request(c)},a.prototype.patch=function(a,b){b=b||{};var c=Object.create(b);return c.method=o.PATCH,c.url=a,this.request(c)},a.prototype["delete"]=function(a,b){var c=Object.create(b);return c.method=o.DELETE,c.url=a,this.request(c)},a.prototype.request=function(a){var b=this;return this._validateRequest(a).then(function(a){return b._doRequest(a)})},a.prototype._validateRequest=function(a){if(!a||"object"!=typeof a)return Promise.reject(new Error(g));var b=Object.create(a);if("string"!=typeof a.url)return Promise.reject(new Error(h));if(b.uri=new e(b.url),!b.uri.scheme)return Promise.reject(new Error(k));if(!n.test(b.uri.scheme))return Promise.reject(new Error(f));if(!b.uri.authority||!b.uri.authority.host)return Promise.reject(new Error(j));if("string"!=typeof b.method||!(b.method in o))return Promise.reject(new Error(i));if(b.timeout=b.timeout||m,"number"!=typeof b.timeout)return Promise.reject(new Error(l));if(b.headers=this._createHeaders(b.headers),!this._isUpstreamRequest(a.method)&&b.data&&"object"==typeof b.data){var c=Object.keys(b.data);c.length>0&&!b.uri.query&&(b.uri.query=new d("")),c.forEach(function(a){b.uri.query.values[a]=b.data[a]}),b.data=null}else{var p=this._getDataToSend(b.headers,b.data);b.headers=p.headers,b.data=p.data}return Promise.resolve(b)},a.prototype._getDataToSend=function(c,e){var f=b(c),g=f.name,h=f.type;if(!e||"object"!=typeof e)return e=e?String(e):"",h||(c[g]=a.PLAIN_TEXT_ENTITY_CONTENT_TYPE),{headers:c,data:e};if(h===a.TYPES.JSON)return{headers:c,data:JSON.stringify(e)};c[g]=a.URL_ENCODED_ENTITY_CONTENT_TYPE;var i=new d;return i.values=e,{headers:c,data:i.toString().replace(/\+/g,"%2B").replace(/%20/g,"+")}},a.prototype._createHeaders=function(b){b&&"object"==typeof b||(b={});var c={};return Object.keys(a.DEFAULT_GENERAL_HEADERS).forEach(function(b){c[b]=a.DEFAULT_GENERAL_HEADERS[b]}),Object.keys(b).forEach(function(a){return null===b[a]||void 0===b[a]?void delete c[a]:void(c[a]=b[a])}),c},a.prototype._doRequest=function(a){},a.prototype.convertResponse=function(c,e){"string"!=typeof e&&(e="");var f=b(c),g=f.type||a.TYPES.PLAIN_TEXT;switch(g){case a.TYPES.JSON:var h;try{h=JSON.parse(e)}catch(i){}return h||{};case a.TYPES.URL_ENCODED:var j;try{var k=new d(e.replace("+","%20"));j=k.values}catch(i){}return j||{};default:return e}},a.prototype._isUpstreamRequest=function(a){return a===o.POST||a===o.PUT||a===o.PATCH};
},{"catberry-uri":19}],19:[function(require,module,exports){
"use strict";module.exports={URI:require("./lib/URI"),Authority:require("./lib/Authority"),UserInfo:require("./lib/UserInfo"),Query:require("./lib/Query")};
},{"./lib/Authority":20,"./lib/Query":21,"./lib/URI":22,"./lib/UserInfo":23}],20:[function(require,module,exports){
"use strict";function a(a){if("string"==typeof a&&a.length>0){var e=a.indexOf("@");if(-1!==e){var f=a.substring(0,e);this.userInfo=new b(f),a=a.substring(e+1)}var g=a.lastIndexOf(":");if(-1!==g){var h=a.substring(g+1);g===a.length-1?(this.port="",a=a.substring(0,g)):d.test(h)&&(this.port=h,a=a.substring(0,g))}this.host=c.decode(a)}}module.exports=a;var b=require("./UserInfo"),c=require("./percentEncodingHelper"),d=/^\d+$/,e="URI authority port must satisfy expression "+d.toString();a.prototype.userInfo=null,a.prototype.host=null,a.prototype.port=null,a.prototype.clone=function(){var b=new a;return this.userInfo&&(b.userInfo=this.userInfo.clone()),"string"==typeof this.host&&(b.host=this.host),"string"==typeof this.port&&(b.port=this.port),b},a.prototype.toString=function(){var a="";if(this.userInfo&&(a+=this.userInfo.toString()+"@"),void 0!==this.host&&null!==this.host){var b=String(this.host);a+=c.encodeHost(b)}if(void 0!==this.port&&null!==this.port){var f=String(this.port);if(f.length>0&&!d.test(f))throw new Error(e);a+=":"+f}return a};
},{"./UserInfo":23,"./percentEncodingHelper":24}],21:[function(require,module,exports){
"use strict";function a(a){"string"==typeof a&&(this.values={},a.split("&").forEach(function(a){var c=a.split("="),d=b.decode(c[0]);if(d){d in this.values&&!(this.values[d]instanceof Array)&&(this.values[d]=[this.values[d]]);var e="string"==typeof c[1]?b.decode(c[1]):null;this.values[d]instanceof Array?this.values[d].push(e):this.values[d]=e}},this))}module.exports=a;var b=require("./percentEncodingHelper");a.prototype.values=null,a.prototype.clone=function(){var b=new a;return this.values&&(b.values={},Object.keys(this.values).forEach(function(a){b.values[a]=this.values[a]},this)),b},a.prototype.toString=function(){if(!this.values)return"";var a="";return Object.keys(this.values).forEach(function(c){var d=this.values[c]instanceof Array?this.values[c]:[this.values[c]];d.forEach(function(d){a+="&"+b.encodeQuerySubComponent(c),void 0!==d&&null!==d&&(d=String(d),a+="="+b.encodeQuerySubComponent(d))})},this),a.replace(/^&/,"")};
},{"./percentEncodingHelper":24}],22:[function(require,module,exports){
"use strict";function a(a){"string"!=typeof a&&(a="");var b=a.match(h);b&&("string"==typeof b[2]&&(this.scheme=f.decode(b[2])),"string"==typeof b[4]&&(this.authority=new e(b[4])),"string"==typeof b[5]&&(this.path=f.decodePath(b[5])),"string"==typeof b[7]&&(this.query=new g(b[7])),"string"==typeof b[9]&&(this.fragment=f.decode(b[9])))}function b(b,e){var f=new a("");return e.scheme?(f.scheme=e.scheme,f.authority=e.authority?e.authority.clone():e.authority,f.path=d(e.path),f.query=e.query?e.query.clone():e.query):(e.authority?(f.authority=e.authority?e.authority.clone():e.authority,f.path=d(e.path),f.query=e.query?e.query.clone():e.query):(""===e.path?(f.path=b.path,e.query?f.query=e.query.clone():f.query=b.query?b.query.clone():b.query):("/"===e.path[0]?f.path=d(e.path):(f.path=c(b,e),f.path=d(f.path)),f.query=e.query?e.query.clone():e.query),f.authority=b.authority?b.authority.clone():b.authority),f.scheme=b.scheme),f.fragment=e.fragment,f}function c(a,b){if(a.authority&&""===a.path)return"/"+b.path;var c=-1!==a.path.indexOf("/")?a.path.replace(/\/[^\/]+$/,"/"):"";return c+b.path}function d(a){if(!a)return"";for(var b=a,c="",d="",e="";0!==b.length;)if(c=b.replace(/^\.?\.\//,""),c===b)if(c=b.replace(/^((\/\.\/)|(\/\.$))/,"/"),c===b)if(c=b.replace(/^((\/\.\.\/)|(\/\.\.$))/,"/"),c===b){if("."===b||".."===b)break;d=/^\/?[^\/]*(\/|$)/.exec(b)[0],d=d.replace(/([^\/])(\/$)/,"$1"),b=b.substring(d.length),e+=d}else e=e.replace(/\/[^\/]+$/,""),b=c;else b=c;else b=c;return e}module.exports=a;var e=require("./Authority"),f=require("./percentEncodingHelper"),g=require("./Query"),h=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),i=/^[a-z]+[a-z\d\+\.-]*$/i,j="URI scheme must satisfy expression "+i.toString(),k="Scheme component is required to be present in a base URI";a.prototype.scheme=null,a.prototype.authority=null,a.prototype.path=null,a.prototype.query=null,a.prototype.fragment=null,a.prototype.resolveRelative=function(a){if(!a.scheme)throw new Error(k);return b(a,this)},a.prototype.clone=function(){var b=new a;return"string"==typeof this.scheme&&(b.scheme=this.scheme),this.authority&&(b.authority=this.authority.clone()),"string"==typeof this.path&&(b.path=this.path),this.query&&(b.query=this.query.clone()),"string"==typeof this.fragment&&(b.fragment=this.fragment),b},a.prototype.toString=function(){var a="";if(void 0!==this.scheme&&null!==this.scheme){var b=String(this.scheme);if(!i.test(b))throw new Error(j);a+=b+":"}this.authority&&(a+="//"+this.authority.toString());var c=void 0===this.path||null===this.path?"":String(this.path);if(a+=f.encodePath(c),this.query&&(a+="?"+this.query.toString()),void 0!==this.fragment&&null!==this.fragment){var d=String(this.fragment);a+="#"+f.encodeFragment(d)}return a};
},{"./Authority":20,"./Query":21,"./percentEncodingHelper":24}],23:[function(require,module,exports){
"use strict";function a(a){if("string"==typeof a&&a.length>0){var c=a.split(":");"string"==typeof c[0]&&(this.user=b.decode(c[0])),"string"==typeof c[1]&&(this.password=b.decode(c[1]))}}module.exports=a;var b=require("./percentEncodingHelper");a.prototype.user=null,a.prototype.password=null,a.prototype.clone=function(){var b=new a;return"string"==typeof this.user&&(b.user=this.user),"string"==typeof this.password&&(b.password=this.password),b},a.prototype.toString=function(){var a="";if(void 0!==this.user&&null!==this.user){var c=String(this.user);a+=b.encodeUserInfoSubComponent(c)}if(void 0!==this.password&&null!==this.password){var d=String(this.password);a+=":"+b.encodeUserInfoSubComponent(d)}return a};
},{"./percentEncodingHelper":24}],24:[function(require,module,exports){
"use strict";module.exports={encodeUserInfoSubComponent:function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},encodeHost:function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=:\[\]\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},encodePath:function(a){return a.split(/%2f/i).map(function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=:@\/\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)}).reduce(function(a,b){return a?b?a+"%2F"+b:a:b},"")},encodeQuerySubComponent:function(a){return a.replace(/[^\w\.~\-!\$'\(\)\*\+,;:@\/\?\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},encodeFragment:function(a){return a.replace(/[^\w\.~\-!\$&'\(\)\*\+,;=:@\/\?\uD800-\uDBFF\uDC00-\uDFFF]/g,encodeURIComponent)},decode:function(a){return decodeURIComponent(a)},decodePath:function(a){return a.split(/%2f/i).map(decodeURIComponent).reduce(function(a,b){return a?b?a+"%2F"+b:a:b},"")}};
},{}],25:[function(require,module,exports){
"use strict";function a(){c.call(this)}module.exports=a;var b=require("util"),c=require("../lib/base/CatberryBase");b.inherits(a,c),a.prototype._router=null,a.prototype.wrapDocument=function(){this._router=this.locator.resolve("requestRouter")},a.prototype.startWhenReady=function(){if(window.catberry)return Promise.resolve();var a=this;return new Promise(function(b){window.document.addEventListener("DOMContentLoaded",function(){a.wrapDocument(),window.catberry=a,b()})})};
},{"../lib/base/CatberryBase":39,"util":63}],26:[function(require,module,exports){
"use strict";function a($window){c.call(this),this._window=$window}module.exports=a;var b=require("util"),c=require("../lib/base/CookieWrapperBase");b.inherits(a,c),a.prototype._window=null,a.prototype.getCookieString=function(){return this._window.document.cookie?this._window.document.cookie.toString():""},a.prototype.set=function(a){var b=this._convertToCookieSetup(a);return this._window.document.cookie=b,b};
},{"../lib/base/CookieWrapperBase":40,"util":63}],27:[function(require,module,exports){
"use strict";function a($serviceLocator){j.call(this,$serviceLocator),this._componentInstances=Object.create(null),this._componentElements=Object.create(null),this._componentBindings=Object.create(null),this._currentChangedStores=Object.create(null),this._window=$serviceLocator.resolve("window"),this._logger=$serviceLocator.resolve("logger"),this._config=$serviceLocator.resolve("config"),this._storeDispatcher=$serviceLocator.resolve("storeDispatcher");var a=this;this._eventBus.on("storeChanged",function(b){a._currentChangedStores[b]=!0,a._isStateChanging||a._updateStoreComponents()})}function b(a){for(var b=Object.create(null),c=0;c<a.length;c++)b[a[c].name]=a[c].value;return b}function c(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector;return b.bind(a)}function d(a,b){var c=Object.create(a),d=[],e={};for(var f in a)d.push(f);return d.forEach(function(b){return"function"==typeof a[b]?void(e[b]={get:function(){return a[b].bind(a)}}):void(e[b]={get:function(){return a[b]},set:function(c){a[b]=c}})}),e.currentTarget={get:b},Object.defineProperties(c,e),Object.seal(c),Object.freeze(c),c}module.exports=a;var e=require("util"),f=require("morphdom"),g=require("../lib/helpers/errorHelper"),h=require("../lib/helpers/moduleHelper"),i=require("../lib/helpers/hrTimeHelper"),j=require("../lib/base/DocumentRendererBase");e.inherits(a,j);var k='Component "%s" does not have an ID, skipping...',l='The duplicated ID "%s" has been found, skipping component "%s"...',m={$$head:"$$head",$$document:"$$document"},n={TITLE:"TITLE",HTML:"HTML",HEAD:"HEAD",BASE:"BASE",STYLE:"STYLE",SCRIPT:"SCRIPT",NOSCRIPT:"NOSCRIPT",META:"META",LINK:"LINK"},o={ELEMENT_NODE:1,TEXT_NODE:3,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8},p="Tag name should be a string and attributes should be an object",q='Component for tag "%s" not found',r="The ID is not specified or already used",s={abort:!0,blur:!0,error:!0,focus:!0,load:!0,mouseenter:!0,mouseleave:!0,resize:!0,unload:!0};a.prototype._config=null,a.prototype._logger=null,a.prototype._storeDispatcher=null,a.prototype._componentInstances=null,a.prototype._componentElements=null,a.prototype._componentBindings=null,a.prototype._currentRoutingContext=null,a.prototype._currentChangedStores=null,a.prototype._renderedPromise=null,a.prototype._isUpdating=!1,a.prototype._awaitingRouting=null,a.prototype.initWithState=function(a,b){var c=this;return c._getPromiseForReadyState().then(function(){return c._currentRoutingContext=b,c._storeDispatcher.setState(a,b)}).then(function(){var a=c._componentLoader.getComponentsByNames(),b=c._findComponents(c._window.document.body,a,!0);return b.unshift(c._window.document.head),b.unshift(c._window.document.documentElement),c._initialWrap(a,b)})},a.prototype.render=function(a,b){if(this._awaitingRouting={state:a,routingContext:b},this._isStateChanging)return this._renderedPromise;this._isStateChanging=!0;var c=this;return c._renderedPromise=this._getPromiseForReadyState().then(function(){return c._updateStoreComponents()})["catch"](function(a){c._eventBus.emit("error",a)}).then(function(){c._isStateChanging=!1}),this._renderedPromise},a.prototype.renderComponent=function(a,b){var c=this;return this._getPromiseForReadyState().then(function(){var d=c._getId(a);if(!d)return void c._logger.warn(e.format(k,g));b||(b=c._createRenderingContext([]),b.rootIds[d]=!0);var g=h.getOriginalComponentName(a.tagName),j=a.hasChildNodes(),m=b.components[g],o=c._componentInstances[d];if(m){if(d in b.renderedIds)return void c._logger.warn(e.format(l,d,g));b.renderedIds[d]=!0,o||(m.constructor.prototype.$context=c._getComponentContext(m,a),o=c._serviceLocator.resolveInstance(m.constructor,b.config),o.$context=m.constructor.prototype.$context,c._componentInstances[d]=o);var p={name:g,context:o.$context};c._componentElements[d]=a;var q=i.get();return c._eventBus.emit("componentRender",p),Promise.resolve().then(function(){return d in b.rootIds&&j?c._unbindAll(a,b):void 0})["catch"](function(a){c._eventBus.emit("error",a)}).then(function(){o.$context.element!==a&&(o.$context=c._getComponentContext(m,a));var b=h.getMethodToInvoke(o,"render");return h.getSafePromise(b)}).then(function(a){return m.template.render(a)})["catch"](function(b){return c._handleRenderError(a,m,b)}).then(function(d){var e=a.tagName===n.HEAD;if(""!==d||!e){var g=c._createTemporaryElement(a);if(g.innerHTML=d,e)return void c._mergeHead(a,g);f(a,g,{onBeforeMorphElChildren:function(d){return d===a||!c._isComponent(b.components,d)}});var h=c._findComponents(a,b.components,!1).map(function(a){return c.renderComponent(a,b)});return Promise.all(h)}}).then(function(){return p.hrTime=i.get(q),p.time=i.toMilliseconds(p.hrTime),c._eventBus.emit("componentRendered",p),c._bindComponent(a)}).then(function(){d in b.rootIds&&j&&c._collectRenderingGarbage(b)})["catch"](function(a){c._eventBus.emit("error",a)})}})},a.prototype.getComponentById=function(a){return this._componentInstances[a]||null},a.prototype.getComponentByElement=function(a){if(!a)return null;var b=a.getAttribute(h.ATTRIBUTE_ID);return this.getComponentById(b)},a.prototype.collectGarbage=function(){var a=this;return this._getPromiseForReadyState().then(function(){var b=[];return Object.keys(a._componentElements).forEach(function(c){if(!m.hasOwnProperty(c)){var d=a._window.document.getElementById(c);if(!d){var e=a._unbindComponent(a._componentElements[c]).then(function(){a._removeComponent(c)});b.push(e)}}}),Promise.all(b)})},a.prototype.createComponent=function(a,b){if("string"!=typeof a||!b||"object"!=typeof b)return Promise.reject(new Error(p));var c=this;return this._getPromiseForReadyState().then(function(){var d=c._componentLoader.getComponentsByNames(),f=h.getOriginalComponentName(a);if(h.isHeadComponent(f)||h.isDocumentComponent(f)||!(f in d))return Promise.reject(new Error(e.format(q,a)));var g=h.getTagNameForComponentName(f),i=b[h.ATTRIBUTE_ID];if(!i||i in c._componentInstances)return Promise.reject(new Error(r));var j=c._window.document.createElement(g);return Object.keys(b).forEach(function(a){j.setAttribute(a,b[a])}),c.renderComponent(j).then(function(){return j})})},a.prototype._collectRenderingGarbage=function(a){var b=this;Object.keys(a.unboundIds).forEach(function(c){c in a.renderedIds||null===b._window.document.getElementById(c)&&b._removeComponent(c)})},a.prototype._unbindAll=function(a,b){var c=this,d=this._getId(a),e=[];return c._findComponents(a,b.components,!0).forEach(function(a){var d=c._getId(a);b.unboundIds[d]=!0,e.push(c._unbindComponent(a))}),b.unboundIds[d]=!0,e.push(this._unbindComponent(a)),Promise.all(e)},a.prototype._unbindComponent=function(a){var b=this._getId(a),c=this,d=this._componentInstances[b];if(!d)return Promise.resolve();b in this._componentBindings&&(Object.keys(this._componentBindings[b]).forEach(function(d){a.removeEventListener(d,c._componentBindings[b][d].handler,s.hasOwnProperty(d))}),delete this._componentBindings[b]);var e=h.getMethodToInvoke(d,"unbind");return h.getSafePromise(e).then(function(){c._eventBus.emit("componentUnbound",{element:a,id:m.hasOwnProperty(b)?null:b})})["catch"](function(a){c._eventBus.emit("error",a)})},a.prototype._removeComponent=function(a){delete this._componentElements[a],delete this._componentInstances[a],delete this._componentBindings[a]},a.prototype._bindComponent=function(a){var b=this._getId(a),c=this,d=this._componentInstances[b];if(!d)return Promise.resolve();var e=h.getMethodToInvoke(d,"bind");return h.getSafePromise(e).then(function(e){return e&&"object"==typeof e?(c._componentBindings[b]=Object.create(null),Object.keys(e).forEach(function(f){if(f=f.toLowerCase(),!(f in c._componentBindings[b])){var g=Object.create(null);Object.keys(e[f]).forEach(function(a){var b=e[f][a];"function"==typeof b&&(g[a]=b.bind(d))}),c._componentBindings[b][f]={handler:c._createBindingHandler(a,g),selectorHandlers:g},a.addEventListener(f,c._componentBindings[b][f].handler,s.hasOwnProperty(f))}}),void c._eventBus.emit("componentBound",{element:a,id:b})):void c._eventBus.emit("componentBound",{element:a,id:m.hasOwnProperty(b)?null:b})})},a.prototype._createBindingHandler=function(a,b){var e=Object.keys(b);return function(f){var g=d(f,function(){return h}),h=f.target,i=c(h),j=e.some(function(a){return i(a)?(b[a](g),!0):!1});if(!j&&f.bubbles)for(;h.parentElement&&h!==a;){h=h.parentElement,i=c(h);for(var k=0;k<e.length;k++)if(i(e[k])){j=!0,b[e[k]](g);break}if(j)break}}},a.prototype._isComponent=function(a,b){var c=b.nodeName;return h.COMPONENT_PREFIX_REGEXP.test(c)&&h.getOriginalComponentName(c)in a},a.prototype._findComponents=function(a,b,c){for(var d,e,f=[],g=[a];g.length>0;)for(d=g.shift().childNodes,e=0;e<d.length;e++)1===d[e].nodeType&&(this._isComponent(b,d[e])?(c&&g.push(d[e]),f.push(d[e])):g.push(d[e]));return f},a.prototype._handleRenderError=function(a,b,c){return this._eventBus.emit("error",c),a.tagName===n.HEAD?Promise.resolve(""):!this._config.isRelease&&c instanceof Error?Promise.resolve(g.prettyPrint(c,this._window.navigator.userAgent)):b.errorTemplate?b.errorTemplate.render(c):Promise.resolve("")},a.prototype._updateStoreComponents=function(){if(this._isUpdating)return Promise.resolve();var a=this,b=this._window.document.documentElement.getAttribute(h.ATTRIBUTE_STORE);if(b in this._currentChangedStores){var c=this._currentRoutingContext.location.toString();return c===this._window.location.toString()?(this._window.location.reload(),Promise.resolve()):(this._window.location.assign(c),Promise.resolve())}if(this._isUpdating=!0,this._awaitingRouting){var d=this._componentLoader.getComponentsByNames(),e=this._storeDispatcher.setState(this._awaitingRouting.state,this._awaitingRouting.routingContext);e.forEach(function(b){a._currentChangedStores[b]=!0}),this._currentRoutingContext=this._awaitingRouting.routingContext,Object.keys(this._componentInstances).forEach(function(b){var c=a._componentInstances[b];c.$context=a._getComponentContext(d[c.$context.name],c.$context.element)}),this._awaitingRouting=null}var f=Object.keys(this._currentChangedStores);if(0===f.length)return this._isUpdating=!1,Promise.resolve();this._currentChangedStores=Object.create(null);var g=this._createRenderingContext(f),i=g.roots.map(function(b){return g.rootIds[a._getId(b)]=!0,a.renderComponent(b,g)});return Promise.all(i)["catch"](function(b){a._eventBus.emit("error",b)}).then(function(){return a._isUpdating=!1,a._eventBus.emit("documentUpdated",f),a._updateStoreComponents()})},a.prototype._mergeHead=function(a,b){if(b){var c,d,e,f,g,h=this,i=this._getHeadMap(a.childNodes),j=Object.create(null);for(d=0;d<b.childNodes.length;d++)switch(c=b.childNodes[d],c.nodeName in i||(i[c.nodeName]=Object.create(null)),c.nodeName){case n.TITLE:case n.BASE:case n.NOSCRIPT:e=this._getNodeKey(c),g=a.getElementsByTagName(c.nodeName)[0],g?(f=this._getNodeKey(g),a.replaceChild(c,g)):a.appendChild(c),d--;break;case n.STYLE:case n.LINK:case n.SCRIPT:e=h._getNodeKey(c),e in i[c.nodeName]||(a.appendChild(c),d--);break;default:e=h._getNodeKey(c),e in i[c.nodeName]?j[e]=!0:(a.appendChild(c),d--)}n.META in i&&Object.keys(i[n.META]).forEach(function(b){b in j||a.removeChild(i[n.META][b])})}},a.prototype._getHeadMap=function(a){var b,c,d=Object.create(null),e=this;for(b=0;b<a.length;b++)c=a[b],c.nodeName in d||(d[c.nodeName]=Object.create(null)),d[c.nodeName][e._getNodeKey(c)]=c;return d},a.prototype._getNodeKey=function(a){var b,c,d=[];if(a.nodeType!==o.ELEMENT_NODE)return a.nodeValue||"";if(a.hasAttributes())for(c=0;c<a.attributes.length;c++)b=a.attributes[c],d.push(b.name+"="+b.value);return d.sort().join("|")+">"+a.textContent},a.prototype._initialWrap=function(a,b){var c=this,d=b.pop();return Promise.resolve().then(function(){var b=c._getId(d);if(b){var e=h.getOriginalComponentName(d.nodeName);if(e in a){var f=a[e].constructor;f.prototype.$context=c._getComponentContext(a[e],d);var g=c._serviceLocator.resolveInstance(f,c._config);return g.$context=f.prototype.$context,c._componentElements[b]=d,c._componentInstances[b]=g,c._storeDispatcher.getStore(d.getAttribute(h.ATTRIBUTE_STORE)),c._eventBus.emit("componentRendered",{name:e,attributes:g.$context.attributes,context:g.$context}),c._bindComponent(d)}}}).then(function(){return b.length>0?c._initialWrap(a,b):void c._eventBus.emit("documentRendered",c._currentRoutingContext)})},a.prototype._getComponentContext=function(a,c){var d=this,e=c.getAttribute(h.ATTRIBUTE_STORE),f=Object.create(this._currentRoutingContext);return this._storeDispatcher.getStore(e),Object.defineProperties(f,{name:{get:function(){return a.name},enumerable:!0},attributes:{get:function(){return b(c.attributes)},enumerable:!0}}),f.element=c,f.getComponentById=function(a){return d.getComponentById(a)},f.getComponentByElement=function(a){return d.getComponentByElement(a)},f.createComponent=function(a,b){return d.createComponent(a,b)},f.collectGarbage=function(){return d.collectGarbage()},f.getStoreData=function(){var a=c.getAttribute(h.ATTRIBUTE_STORE);return d._storeDispatcher.getStoreData(a)},f.sendAction=function(a,b){var e=c.getAttribute(h.ATTRIBUTE_STORE);return d._storeDispatcher.sendAction(e,a,b)},f.sendBroadcastAction=function(a,b){return d._storeDispatcher.sendBroadcastAction(a,b)},Object.freeze(f)},a.prototype._findRenderingRoots=function(a){var b=this,c=this._window.document.head.getAttribute(h.ATTRIBUTE_STORE),d=this._componentLoader.getComponentsByNames(),e=Object.create(null),f=Object.create(null),g=Object.create(null),i=[];return a.forEach(function(a){f[a]=!0,e[a]=b._window.document.querySelectorAll("["+h.ATTRIBUTE_ID+"]["+h.ATTRIBUTE_STORE+'="'+a+'"]')}),h.HEAD_COMPONENT_NAME in d&&c in f&&(g[this._getId(this._window.document.head)]=!0,i.push(this._window.document.head)),a.forEach(function(a){for(var c,j,k,l,m,n,o=0;o<e[a].length;o++){for(c=e[a][o],j=e[a][o].getAttribute(h.ATTRIBUTE_ID),k=c,l=j,n=h.getOriginalComponentName(c.tagName);c.parentElement;)c=c.parentElement,j=b._getId(c),m=c.getAttribute(h.ATTRIBUTE_STORE),m&&m in f&&n in d&&(k=c,l=j);l in g||(g[l]=!0,i.push(k))}}),i},a.prototype._createRenderingContext=function(a){var b=this._componentLoader.getComponentsByNames();return{config:this._config,renderedIds:Object.create(null),unboundIds:Object.create(null),isHeadRendered:!1,bindMethods:[],routingContext:this._currentRoutingContext,components:b,rootIds:Object.create(null),roots:a?this._findRenderingRoots(a):[]}},a.prototype._getId=function(a){return a===this._window.document.documentElement?m.$$document:a===this._window.document.head?m.$$head:a.getAttribute(h.ATTRIBUTE_ID)},a.prototype._createTemporaryElement=function(a){for(var b=this._window.document.createElement(a.tagName),c=a.attributes,d=0;d<c.length;d++)b.setAttribute(c[d].name,c[d].value);return b};
},{"../lib/base/DocumentRendererBase":41,"../lib/helpers/errorHelper":44,"../lib/helpers/hrTimeHelper":30,"../lib/helpers/moduleHelper":45,"morphdom":51,"util":63}],28:[function(require,module,exports){
"use strict";function a(a){"object"==typeof a&&(this._levels=a),"string"==typeof a&&(this._levels={},Object.keys(c).forEach(function(b){this._levels[c[b]]=-1!==a.search(c[b])},this)),this.debug=this.debug.bind(this),this.trace=this.trace.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this),this.fatal=this.fatal.bind(this)}function b(a){try{a instanceof Error||(a="string"==typeof a?new Error(a):new Error),console.error&&console.error(a)}catch(c){b(c)}}module.exports=a;var c={DEBUG:"debug",TRACE:"trace",INFO:"info",WARN:"warn",ERROR:"error",FATAL:"fatal"};a.prototype._levels={debug:!0,trace:!0,info:!0,warn:!0,error:!0,fatal:!0},a.prototype.trace=function(a){this._levels.trace&&console.log&&console.log(a)},a.prototype.debug=function(a){this._levels.debug&&console.log&&console.log(a)},a.prototype.info=function(a){this._levels.info&&console.info&&console.info(a)},a.prototype.warn=function(a){this._levels.warn&&console.warn&&console.warn(a)},a.prototype.error=function(a){this._levels.error&&b(a)},a.prototype.fatal=function(a){this._levels.fatal&&b(a)};
},{}],29:[function(require,module,exports){
"use strict";function a($serviceLocator){this._eventBus=$serviceLocator.resolve("eventBus"),this._window=$serviceLocator.resolve("window"),this._documentRenderer=$serviceLocator.resolve("documentRenderer"),this._stateProvider=$serviceLocator.resolve("stateProvider"),this._contextFactory=$serviceLocator.resolve("contextFactory"),this._isHistorySupported=this._window.history&&this._window.history.pushState instanceof Function;var a=this;a._wrapDocument(),this._changeState(new d(this._window.location.toString()))["catch"](function(b){a._handleError(b)})}function b(a){for(;a&&a.nodeName!==h&&a.nodeName!==i;)a=a.parentNode;return a&&a.nodeName===h?a:null}module.exports=a;var c=require("util"),d=require("catberry-uri").URI,e=0,f="href",g="target",h="A",i="BODY";a.prototype._isStateInitialized=!1,a.prototype._referrer="",a.prototype._location=null,a.prototype._eventBus=null,a.prototype._contextFactory=null,a.prototype._stateProvider=null,a.prototype._documentRenderer=null,a.prototype._window=null,a.prototype._isHistorySupported=!1,a.prototype.route=function(){var a=this;return Promise.resolve().then(function(){var b=new d(a._window.location.toString()),c=b.authority?b.authority.toString():null,e=a._location.authority?a._location.authority.toString():null;if(b.scheme===a._location.scheme&&c===e){var f=b.query?b.query.toString():null,g=a._location.query?a._location.query.toString():null;return b.path===a._location.path&&f===g?void(a._location=b):a._changeState(b)}})},a.prototype.go=function(a){var b=this;return Promise.resolve().then(function(){var c=new d(a);c=c.resolveRelative(b._location),a=c.toString();var e=b._location.authority?b._location.authority.toString():null,f=c.authority?c.authority.toString():null;if(!b._isHistorySupported||c.scheme!==b._location.scheme||f!==e)return void b._window.location.assign(a);var g=b._stateProvider.getStateByUri(c);return g?(b._window.history.pushState(g,"",a),b.route()):void b._window.location.assign(a)})},a.prototype._changeState=function(a){var b=this;return Promise.resolve().then(function(){b._location=a;var c=b._stateProvider.getStateByUri(a),d=b._contextFactory.create({referrer:b._referrer||b._window.document.referrer,location:b._location,userAgent:b._window.navigator.userAgent});return b._isStateInitialized?null===c?void window.location.reload():b._documentRenderer.render(c,d):(b._isStateInitialized=!0,b._documentRenderer.initWithState(c,d))}).then(function(){b._referrer=b._location})},a.prototype._wrapDocument=function(){var a=this;this._isHistorySupported&&(this._window.addEventListener("popstate",function(){a.route()["catch"](a._handleError.bind(a))}),this._window.document.body.addEventListener("click",function(c){if(!c.defaultPrevented)if(c.target.tagName===h)a._linkClickHandler(c,c.target);else{var d=b(c.target);if(!d)return;a._linkClickHandler(c,d)}}))},a.prototype._linkClickHandler=function(a,b){var c=b.getAttribute(g);if(!c&&!(a.button!==e||a.ctrlKey||a.altKey||a.shiftKey)){var d=b.getAttribute(f);d&&"#"!==d[0]&&(a.preventDefault(),this.go(d)["catch"](this._handleError.bind(this)))}},a.prototype._handleError=function(a){this._eventBus.emit("error",a)};
},{"catberry-uri":19,"util":63}],30:[function(require,module,exports){
"use strict";module.exports={get:require("browser-process-hrtime"),toMessage:require("pretty-hrtime"),toMilliseconds:function(a){return 1e3*a[0]+Math.round(a[1]/1e6)}};
},{"browser-process-hrtime":10,"pretty-hrtime":52}],31:[function(require,module,exports){
"use strict";function a($serviceLocator){this._serviceLocator=$serviceLocator,this._eventBus=$serviceLocator.resolve("eventBus"),this._templateProvider=$serviceLocator.resolve("templateProvider"),d.call(this,$serviceLocator.resolveAll("componentTransform"))}module.exports=a;var b=require("../../lib/helpers/moduleHelper"),c=require("util"),d=require("../../lib/base/LoaderBase");c.inherits(a,d),a.prototype._eventBus=null,a.prototype._serviceLocator=null,a.prototype._templateProvider=null,a.prototype._loadedComponents=null,a.prototype.load=function(){if(this._loadedComponents)return Promise.resolve(this._loadedComponents);this._loadedComponents=Object.create(null);var a=this;return Promise.resolve().then(function(){var b=a._serviceLocator.resolveAll("component"),c=[];return b.forEach(function(b){c.unshift(a._processComponent(b))}),Promise.all(c)}).then(function(b){return b.forEach(function(b){b&&"object"==typeof b&&(a._loadedComponents[b.name]=b)}),a._eventBus.emit("allComponentsLoaded",b),a._loadedComponents})},a.prototype._processComponent=function(a){var c=this,d=Object.create(a);return this._applyTransforms(d).then(function(a){if(d=a,c._templateProvider.registerCompiled(d.name,d.templateSource),d.template={render:function(a){return c._templateProvider.render(d.name,a)}},"string"==typeof d.errorTemplateSource){var e=b.getNameForErrorTemplate(d.name);c._templateProvider.registerCompiled(e,d.errorTemplateSource),d.errorTemplate={render:function(a){return c._templateProvider.render(e,a)}}}return c._eventBus.emit("componentLoaded",d),d})["catch"](function(a){return c._eventBus.emit("error",a),null})},a.prototype.getComponentsByNames=function(){return this._loadedComponents||Object.create(null)};
},{"../../lib/base/LoaderBase":42,"../../lib/helpers/moduleHelper":45,"util":63}],32:[function(require,module,exports){
"use strict";function a($serviceLocator){this._serviceLocator=$serviceLocator,this._eventBus=$serviceLocator.resolve("eventBus"),c.call(this,$serviceLocator.resolveAll("storeTransform"))}module.exports=a;var b=require("util"),c=require("../../lib/base/LoaderBase");b.inherits(a,c),a.prototype._eventBus=null,a.prototype._serviceLocator=null,a.prototype._loadedStores=null,a.prototype.load=function(){if(this._loadedStores)return Promise.resolve(this._loadedStores);this._loadedStores=Object.create(null);var a=this;return Promise.resolve().then(function(){var b=a._serviceLocator.resolveAll("store"),c=[];return b.forEach(function(b){c.unshift(a._getStore(b))}),Promise.all(c)}).then(function(b){return b.forEach(function(b){b&&"object"==typeof b&&(a._loadedStores[b.name]=b)}),a._eventBus.emit("allStoresLoaded",a._loadedStores),Promise.resolve(a._loadedStores)})},a.prototype._getStore=function(a){var b=this;return this._applyTransforms(a).then(function(a){return b._eventBus.emit("storeLoaded",a),a})["catch"](function(a){return b._eventBus.emit("error",a),null})},a.prototype.getStoresByNames=function(){return this._loadedStores||Object.create(null)};
},{"../../lib/base/LoaderBase":42,"util":63}],33:[function(require,module,exports){
"use strict";function a($serviceLocator){d.call(this,$serviceLocator),c.defineReadOnly(this,"isBrowser",!0),c.defineReadOnly(this,"isServer",!1)}module.exports=a;var b=require("util"),c=require("../../lib/helpers/propertyHelper"),d=require("../../lib/base/ModuleApiProviderBase");b.inherits(a,d),a.prototype.notFound=function(){var a=this.locator.resolve("window");return a.location.reload(),Promise.resolve()},a.prototype.redirect=function(a){var b=this.locator.resolve("requestRouter");return b.go(a)},a.prototype.clearFragment=function(){var a=this.locator.resolve("window"),b=a.document.body.scrollTop;return a.location.hash="",a.document.body.scrollTop=b,Promise.resolve()};
},{"../../lib/base/ModuleApiProviderBase":43,"../../lib/helpers/propertyHelper":46,"util":63}],34:[function(require,module,exports){
"use strict";module.exports=require("./lib/Bootstrapper");
},{"./lib/Bootstrapper":1}],35:[function(require,module,exports){
"use strict";function a($serviceLocator){this._serviceLocator=$serviceLocator}module.exports=a;var b=require("./helpers/propertyHelper");a.prototype._serviceLocator=null,a.prototype.create=function(a){var c=this._serviceLocator.resolve("moduleApiProvider"),d=Object.create(c);return Object.keys(a).forEach(function(c){b.defineReadOnly(d,c,a[c])}),d};
},{"./helpers/propertyHelper":46}],36:[function(require,module,exports){
"use strict";function a(){this._emitter=new b.EventEmitter,this._emitter.setMaxListeners(0),this._toInvoke=Object.create(null),this._inProgress=Object.create(null)}module.exports=a;var b=require("events"),c="There is no such registered method";a.prototype._emitter=null,a.prototype._toInvoke=null,a.prototype._inProgress=null,a.prototype.add=function(a,b){this._toInvoke[a]=b},a.prototype.isRegistered=function(a){return"function"==typeof this._toInvoke[a]},a.prototype.invoke=function(a){var b=this;return this.isRegistered(a)?this._inProgress[a]?new Promise(function(c,d){b._emitter.once(a,c),b._emitter.once(a+"--error",d)}):(this._inProgress[a]=!0,this._toInvoke[a]().then(function(c){b._emitter.emit(a,c),b._inProgress[a]=null})["catch"](function(c){b._emitter.emit(a+"--error",c),b._inProgress[a]=null}),this.invoke(a)):Promise.reject(new Error(c))};
},{"events":49}],37:[function(require,module,exports){
"use strict";function a($serviceLocator,$storeLoader,$eventBus){this._serviceLocator=$serviceLocator,this._storeLoader=$storeLoader,this._eventBus=$eventBus,this._storeInstances=Object.create(null),this._lastData=Object.create(null),this._dependants=Object.create(null),this._serialWrapper=new c}module.exports=a;var b=require("util"),c=require("./SerialWrapper"),d=require("./helpers/moduleHelper"),e='Store "%s" not found',f="State should be set before any request",g=6e4;a.prototype._serviceLocator=null,a.prototype._eventBus=null,a.prototype._storeLoader=null,a.prototype._storeInstances=null,a.prototype._lastData=null,a.prototype._lastState=null,a.prototype._serialWrapper=null,a.prototype._currentBasicContext=null,a.prototype._dependants=null,a.prototype.getStoreData=function(a){if(!this._lastState)return Promise.reject(new Error(f));if("string"!=typeof a)return Promise.resolve(null);if(a in this._lastData){var c=Date.now()-this._lastData[a].createdAt;if(c<=this._lastData[a].lifetime)return Promise.resolve(this._lastData[a].data);delete this._lastData[a]}var d=this,h=g;d._eventBus.emit("storeDataLoad",{name:a});var i=this.getStore(a);return i?("number"==typeof i.$lifetime&&(h=i.$lifetime),d._serialWrapper.invoke(a).then(function(b){return d._lastData[a]={data:b,lifetime:h,createdAt:Date.now()},d._eventBus.emit("storeDataLoaded",{name:a,data:b,lifetime:h}),b})):Promise.reject(new Error(b.format(e,a)))},a.prototype.sendAction=function(a,c,g){if(!this._lastState)return Promise.reject(new Error(f));var h=this,i={storeName:a,actionName:c,args:g};this._eventBus.emit("actionSend",i);var j=this.getStore(a);if(!j)return Promise.reject(new Error(b.format(e,a)));var k=d.getMethodToInvoke(j,"handle",c);return d.getSafePromise(function(){return k(g)}).then(function(a){return h._eventBus.emit("actionSent",i),a})},a.prototype.sendBroadcastAction=function(a,b){var c=[],e=this,f=this._storeLoader.getStoresByNames(),g=d.getCamelCaseName("handle",a);return Object.keys(f).forEach(function(d){var h=f[d],i=h.constructor.prototype[g];if("function"==typeof i){var j=e.sendAction(h.name,a,b);c.push(j)}}),Promise.all(c)},a.prototype.setState=function(a,b){if(a=a||Object.create(null),!this._lastState)return this._currentBasicContext=b,this._lastState=a,[];var c=this,d=Object.create(null);Object.keys(this._lastState).filter(function(b){return!(b in a)}).forEach(function(a){d[a]=!0}),Object.keys(a).forEach(function(b){if(!(b in c._lastState))return void(d[b]=!0);var e=Object.keys(c._lastState[b]),f=Object.keys(a[b]);return f.length!==e.length?void(d[b]=!0):void f.every(function(e){return a[b][e]!==c._lastState[b][e]?(d[b]=!0,!1):!0})}),this._lastState=a,this._currentBasicContext!==b&&(this._currentBasicContext=b,Object.keys(this._storeInstances).forEach(function(a){c._storeInstances[a].$context=c._getStoreContext(a)}));var e=Object.create(null);return Object.keys(d).forEach(function(a){var b=c.getStore(a);b&&b.$context.changed().forEach(function(a){e[a]=!0})}),this._eventBus.emit("stateChanged",{oldState:this._lastState,newState:a}),Object.keys(e)},a.prototype._getStoreContext=function(a){var b=this,c=Object.create(this._currentBasicContext);return c.name=a,c.state=this._lastState[a]||Object.create(null),c.changed=function(){for(var c,d=Object.create(null),e=[a];e.length>0;)c=e.shift(),c in d||(d[c]=!0,c in b._dependants&&(e=e.concat(Object.keys(b._dependants[c]))),delete b._lastData[c],b._eventBus.emit("storeChanged",c));return Object.keys(d)},c.getStoreData=function(c){return c===a?Promise.resolve(null):b.getStoreData(c)},c.setDependency=function(c){c in b._dependants||(b._dependants[c]=Object.create(null)),b._dependants[c][a]=!0},c.unsetDependency=function(c){c in b._dependants&&delete b._dependants[c][a]},c.sendAction=function(a,c,d){return b.sendAction(a,c,d)},c.sendBroadcastAction=function(a,c){return b.sendBroadcastAction(a,c)},c},a.prototype.getStore=function(a){if(!a)return null;var b=this._storeInstances[a];if(b)return b;var c=this,e=c._storeLoader.getStoresByNames(),f=c._serviceLocator.resolve("config");if(!(a in e))return null;var g=e[a].constructor;return g.prototype.$context=c._getStoreContext(a),c._storeInstances[a]=c._serviceLocator.resolveInstance(g,f),c._storeInstances[a].$context=g.prototype.$context,c._serialWrapper.add(a,function(){var b=d.getMethodToInvoke(c._storeInstances[a],"load");return d.getSafePromise(b)}),c._storeInstances[a]};
},{"./SerialWrapper":36,"./helpers/moduleHelper":45,"util":63}],38:[function(require,module,exports){
"use strict";function a(a){this._catberryConstructor=a}module.exports=a;var b=require("util"),c=require("../helpers/moduleHelper"),d=require("../helpers/hrTimeHelper"),e=require("catberry-uhr"),f=require("promise"),g=require("../providers/StateProvider"),h=require("../loaders/StoreLoader"),i=require("../loaders/ComponentLoader"),j=require("../DocumentRenderer"),k=require("../RequestRouter"),l=require("../base/ModuleApiProviderBase"),m=require("../ContextFactory"),n=require("events").EventEmitter,o='Component "%s" loaded',p='Store "%s" loaded',q="All stores loaded",r="All components loaded",s="Document rendered for URI %s",t='Component "%s%s" is being rendered...',u='Component "%s%s" rendered%s';a.prototype._catberryConstructor=null,a.prototype.create=function(a){var b=a||{},c=new this._catberryConstructor;return this.configure(b,c.locator),c.events=c.locator.resolveInstance(l),c},a.prototype.configure=function(a,b){var c=new n;c.setMaxListeners(0),b.registerInstance("promise",f),b.registerInstance("eventBus",c),b.registerInstance("config",a),b.register("stateProvider",g,a,!0),b.register("contextFactory",m,a,!0),b.register("storeLoader",h,a,!0),b.register("componentLoader",i,a,!0),b.register("documentRenderer",j,a,!0),b.register("requestRouter",k,a,!0),e.register(b)},a.prototype._wrapEventsWithLogger=function(a,e,f){var g=Boolean(a.isRelease);e.on("componentLoaded",function(a){f.info(b.format(o,a.name))}).on("storeLoaded",function(a){f.info(b.format(p,a.name))}).on("allStoresLoaded",function(){f.info(q)}).on("allComponentsLoaded",function(){f.info(r)}).on("error",function(a){f.error(a)}),g||e.on("componentRender",function(a){var d=a.context.attributes[c.ATTRIBUTE_ID];f.debug(b.format(t,c.getTagNameForComponentName(a.name),d?"#"+d:""))}).on("componentRendered",function(a){var e=a.context.attributes[c.ATTRIBUTE_ID];f.debug(b.format(u,c.getTagNameForComponentName(a.name),e?"#"+e:"",b.isArray(a.hrTime)?" ("+d.toMessage(a.hrTime)+")":""))}).on("documentRendered",function(a){f.debug(b.format(s,a.location.toString()))})};
},{"../ContextFactory":35,"../DocumentRenderer":27,"../RequestRouter":29,"../base/ModuleApiProviderBase":43,"../helpers/hrTimeHelper":30,"../helpers/moduleHelper":45,"../loaders/ComponentLoader":31,"../loaders/StoreLoader":32,"../providers/StateProvider":48,"catberry-uhr":17,"events":49,"promise":54,"util":63}],39:[function(require,module,exports){
"use strict";function a(){this.locator=new b,this.locator.registerInstance("serviceLocator",this.locator),this.locator.registerInstance("catberry",this)}module.exports=a;var b=require("catberry-locator");a.prototype.version="7.1.1",a.prototype.events=null,a.prototype.locator=null;
},{"catberry-locator":15}],40:[function(require,module,exports){
"use strict";function a(){}module.exports=a;var b=require("util");a.prototype.getAll=function(){var a=this.getCookieString();return this._parseCookieString(a)},a.prototype.get=function(a){return"string"!=typeof a?"":this.getAll()[a]||""},a.prototype._parseCookieString=function(a){var b=Object.create(null);return"string"!=typeof a?b:(a.split(/; */).forEach(function(a){var c=a.indexOf("=");if(!(0>c)){var d=a.substr(0,c).trim(),e=a.substr(c+1,a.length).trim();e=e.replace(/^"|"$/g,""),b[d]=e}}),b)},a.prototype._convertToCookieSetup=function(a){if("string"!=typeof a.key||"string"!=typeof a.value)throw new Error("Wrong key or value");var b=a.key+"="+a.value;return"number"==typeof a.maxAge&&(b+="; Max-Age="+a.maxAge.toFixed(),a.expires||(a.expires=new Date(Date.now()+1e3*a.maxAge))),a.expires instanceof Date&&(b+="; Expires="+a.expires.toUTCString()),"string"==typeof a.path&&(b+="; Path="+a.path),"string"==typeof a.domain&&(b+="; Domain="+a.domain),"boolean"==typeof a.secure&&a.secure&&(b+="; Secure"),"boolean"==typeof a.httpOnly&&a.httpOnly&&(b+="; HttpOnly"),b};
},{"util":63}],41:[function(require,module,exports){
"use strict";function a($serviceLocator){var a=this;this._serviceLocator=$serviceLocator,this._contextFactory=$serviceLocator.resolve("contextFactory"),this._componentLoader=$serviceLocator.resolve("componentLoader"),this._eventBus=$serviceLocator.resolve("eventBus");var b=$serviceLocator.resolve("storeLoader");this._loading=Promise.all([this._componentLoader.load(),b.load()]).then(function(){a._loading=null,a._eventBus.emit("ready")})["catch"](function(b){a._eventBus.emit("error",b)})}module.exports=a,a.prototype._serviceLocator=null,a.prototype._componentLoader=null,a.prototype._loading=null,a.prototype._contextFactory=null,a.prototype._getPromiseForReadyState=function(){return this._loading?this._loading:Promise.resolve()};
},{}],42:[function(require,module,exports){
"use strict";function a(a){this._transforms=a}module.exports=a,a.prototype._transforms=null,a.prototype._applyTransforms=function(a,b){if(void 0===b&&(b=this._transforms.length-1),0>b)return Promise.resolve(a);var c=this,d=this._transforms[b];return Promise.resolve().then(function(){return d.transform(a)}).then(function(a){return c._applyTransforms(a,b-1)})};
},{}],43:[function(require,module,exports){
"use strict";function a($serviceLocator){this.locator=$serviceLocator,this.cookie=$serviceLocator.resolve("cookieWrapper"),this._eventBus=$serviceLocator.resolve("eventBus")}function b(a,b){if("string"!=typeof a)throw new Error(d);if("function"!=typeof b)throw new Error(e)}function c(){}module.exports=a;var d="Event name should be a string",e="Event handler should be a function";a.prototype.cookie=null,a.prototype.locator=null,a.prototype._eventBus=null,a.prototype.on=function(a,c){return b(a,c),this._eventBus.on(a,c),this},a.prototype.once=function(a,c){return b(a,c),this._eventBus.once(a,c),this},a.prototype.removeListener=function(a,c){return b(a,c),this._eventBus.removeListener(a,c),this},a.prototype.removeAllListeners=function(a){return b(a,c),this._eventBus.removeAllListeners(a),this};
},{}],44:[function(require,module,exports){
"use strict";function a(a){return a.replace(d,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(g,"&quot;").replace(h,"&#39;").replace(k,"<br/>")}var b=require("util"),c='Catberry@7.1.1 (<a href="https://github.com/catberry/catberry/issues" target="_blank">report an issue</a>)',d=/&/g,e=/</g,f=/>/g,g=/\"/g,h=/\'/g,i=/^(?:[\w$]+): (?:.+)\r?\n/i,j='<span style="color: red; font-size: 16pt; font-weight: bold;">%s%s</span>',k=/\r?\n/g;module.exports={prettyPrint:function(d,e){if(!d||"object"!=typeof d)return"";var f=(new Date).toUTCString()+";<br/>",g=e?e+";<br/>":"",h="string"==typeof d.name?d.name+": ":"",k=String(d.message||""),l=String(d.stack||"").replace(i,""),m=b.format(j,a(h),a(k));return'<div style="background-color: white; font-size: 12pt;">'+f+g+c+"<br/><br/>"+m+"<br/><br/>"+a(l)+"</div>"}};
},{"util":63}],45:[function(require,module,exports){
"use strict";function a(){return Promise.resolve()}var b={COMPONENT_PREFIX:"cat-",COMPONENT_PREFIX_REGEXP:/^cat-/i,COMPONENT_ERROR_TEMPLATE_POSTFIX:"--error",DOCUMENT_COMPONENT_NAME:"document",DOCUMENT_ELEMENT_NAME:"html",HEAD_COMPONENT_NAME:"head",ATTRIBUTE_ID:"id",ATTRIBUTE_STORE:"cat-store",DEFAULT_LOGIC_FILENAME:"index.js",getNameForErrorTemplate:function(a){return"string"!=typeof a?"":a+b.COMPONENT_ERROR_TEMPLATE_POSTFIX},isDocumentComponent:function(a){return a.toLowerCase()===b.DOCUMENT_COMPONENT_NAME},isHeadComponent:function(a){return a.toLowerCase()===b.HEAD_COMPONENT_NAME},getOriginalComponentName:function(a){return"string"!=typeof a?"":(a=a.toLowerCase(),a===b.HEAD_COMPONENT_NAME?a:a===b.DOCUMENT_COMPONENT_NAME||a===b.DOCUMENT_ELEMENT_NAME?b.DOCUMENT_COMPONENT_NAME:a.replace(b.COMPONENT_PREFIX_REGEXP,""))},getTagNameForComponentName:function(a){if("string"!=typeof a)return"";var c=a.toUpperCase();return a===b.HEAD_COMPONENT_NAME?c:a===b.DOCUMENT_COMPONENT_NAME?b.DOCUMENT_ELEMENT_NAME.toUpperCase():b.COMPONENT_PREFIX.toUpperCase()+c},getMethodToInvoke:function(c,d,e){if(!c||"object"!=typeof c)return a;var f=b.getCamelCaseName(d,e);return"function"==typeof c[f]?c[f].bind(c):"function"==typeof c[d]?c[d].bind(c,e):a},getCamelCaseName:function(a,b){if(!b)return"";var c=b.split(/[^a-z0-9]/i),d=String(a||"");return c.forEach(function(a){a&&(d+=d?a[0].toUpperCase():a[0].toLowerCase(),d+=a.substring(1))}),d},getSafePromise:function(a){var b;try{b=a()}catch(c){return Promise.reject(c)}return Promise.resolve(b)}};module.exports=b;
},{}],46:[function(require,module,exports){
"use strict";module.exports={defineReadOnly:function(a,b,c){Object.defineProperty(a,b,{enumerable:!1,configurable:!1,writable:!1,value:c})}};
},{}],47:[function(require,module,exports){
"use strict";function a(a,b){return function(c,d){var e=c.match(a);return!e||e.length<2?d:(e=e.splice(1),void b.forEach(function(a,b){var c=e[b];try{c=decodeURIComponent(c)}catch(f){}a.storeNames.forEach(function(b){d[b]||(d[b]=Object.create(null)),d[b][a.name]=c})}))}}function b(a){return function(b,c){b=b||Object.create(null),Object.keys(b).forEach(function(d){var f=a[d];if(f){var g=e.isArray(b[d])?b[d].map(f.map).filter(function(a){return null!==a}):f.map(b[d]);null!==g&&f.storeNames.forEach(function(a){c[a]||(c[a]=Object.create(null)),c[a][f.name]=g})}})}}function c(a){return function(b){b=b.toString().replace(/=/g,"%3D").replace(/\?/g,"%3F").replace(/&/g,"%26");var c=b.match(a);if(!c||0===c.length)return null;var d=c[c.length-1];try{d=decodeURIComponent(d)}catch(e){}return d}}function d(a){var b=a.split(n);return{name:b[0].trim().substring(1),storeNames:(b[1]?b[1]:"").split(o).map(function(a){return a.trim()}).filter(function(a){return a.length>0})}}var e=require("util"),f=require("catberry-uri").URI,g="([^\\/\\\\]*)",h="([^&?=]*)",i=/(.+)\/($|\?|#)/,j=/[\-\[\]\{\}\(\)\*\+\?\.\\\^\$\|]/g,k="[$A-Z_][\\dA-Z_$]*",l="(?:(?:\\\\[[ ]*[^\\[\\],]+([ ]*,[ ]*[^\\[\\],]+)*[ ]*\\\\])|(?:\\\\[[ ]*\\\\]))?",m=new RegExp(":"+k+l,"gi"),n=/\\\[|\\\]/,o=",";module.exports={removeEndSlash:function(a){return a&&"string"==typeof a?"/"===a?a:a.replace(i,"$1$2"):""},compileRoute:function(f){if(!f)return null;var i,k,l=f.path.replace(j,"\\$&"),n="^"+l.replace(m,g)+"$",o=new RegExp(n,"i"),p=l.match(m),q=p?p.map(d):null;if(q&&(k=a(o,q)),f.query){var r=Object.create(null);Object.keys(f.query.values).forEach(function(a){if(!e.isArray(f.query.values[a])){var b=f.query.values[a].replace(j,"\\$&"),g="^"+b.replace(m,h)+"$",i=b.match(m);if(i&&0!==i.length){var k=d(i[i.length-1]),l=new RegExp(g,"i");k.map=c(l),r[a]=k}}}),i=b(r)}return{expression:o,map:function(a){var b=Object.create(null);return k&&k(a.path,b),i&&a.query&&i(a.query.values,b),b}}}};
},{"catberry-uri":19,"util":63}],48:[function(require,module,exports){
"use strict";function a($serviceLocator){this._uriMappers=b($serviceLocator)}function b(a){var b=[];return a.resolveAll("routeDefinition").forEach(function(a){if("string"==typeof a){var c=new f(a);return c.path=d.removeEndSlash(c.path),void b.push(d.compileRoute(c))}if("object"==typeof a&&"string"==typeof a.expression&&a.map instanceof Function){var e=new f(a.expression);e.path=d.removeEndSlash(e.path);var g=d.compileRoute(e);return void b.push({expression:g.expression,map:function(b){var c=g.map(b);return a.map(c)}})}"object"==typeof a&&a.expression instanceof RegExp&&a.map instanceof Function&&b.push(a)}),b}function c(a,b){var c=null;return a.some(function(a){return a.expression.test(b.path)?(c=a.map(b)||Object.create(null),!0):!1}),c}module.exports=a;var d=require("./../helpers/routeHelper"),e=require("catberry-uri"),f=e.URI;a.prototype._uriMappers=null,a.prototype.getStateByUri=function(a){if(0===this._uriMappers.length)return null;a=a.clone(),a.path=d.removeEndSlash(a.path);var b=c(this._uriMappers,a);return b?(Object.keys(b).forEach(function(a){Object.freeze(b[a])}),Object.freeze(b),b):null};
},{"./../helpers/routeHelper":47,"catberry-uri":19}],49:[function(require,module,exports){
function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function b(a){return"function"==typeof a}function c(a){return"number"==typeof a}function d(a){return"object"==typeof a&&null!==a}function e(a){return void 0===a}module.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(a){if(!c(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},a.prototype.emit=function(a){var c,f,g,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){if(c=arguments[1],c instanceof Error)throw c;throw TypeError('Uncaught, unspecified "error" event.')}if(f=this._events[a],e(f))return!1;if(b(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),f.apply(this,h)}else if(d(f))for(h=Array.prototype.slice.call(arguments,1),j=f.slice(),g=j.length,i=0;g>i;i++)j[i].apply(this,h);return!0},a.prototype.addListener=function(c,f){var g;if(!b(f))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,b(f.listener)?f.listener:f),this._events[c]?d(this._events[c])?this._events[c].push(f):this._events[c]=[this._events[c],f]:this._events[c]=f,d(this._events[c])&&!this._events[c].warned&&(g=e(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[c].length>g&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"==typeof console.trace&&console.trace())),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(a,c){function d(){this.removeListener(a,d),e||(e=!0,c.apply(this,arguments))}if(!b(c))throw TypeError("listener must be a function");var e=!1;return d.listener=c,this.on(a,d),this},a.prototype.removeListener=function(a,c){var e,f,g,h;if(!b(c))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(e=this._events[a],g=e.length,f=-1,e===c||b(e.listener)&&e.listener===c)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,c);else if(d(e)){for(h=g;h-- >0;)if(e[h]===c||e[h].listener&&e[h].listener===c){f=h;break}if(0>f)return this;1===e.length?(e.length=0,delete this._events[a]):e.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,c)}return this},a.prototype.removeAllListeners=function(a){var c,d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(c in this._events)"removeListener"!==c&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[a],b(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);return delete this._events[a],this},a.prototype.listeners=function(a){var c;return c=this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():[]},a.prototype.listenerCount=function(a){if(this._events){var c=this._events[a];if(b(c))return 1;if(c)return c.length}return 0},a.listenerCount=function(a,b){return a.listenerCount(b)};
},{}],50:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a};
},{}],51:[function(require,module,exports){
function a(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function b(a){!h&&document.createRange&&(h=document.createRange(),h.selectNode(document.body));var b;return h&&h.createContextualFragment?b=h.createContextualFragment(a):(b=document.createElement("body"),b.innerHTML=a),b.childNodes[0]}function c(){}function d(a,b){var c,d,e,f,g=b.attributes,h={};for(c=g.length-1;c>=0;c--)d=g[c],d.specified!==!1&&(e=d.name,f=d.value,h[e]=!0,a.getAttribute(e)!==f&&a.setAttribute(e,f));for(g=a.attributes,c=g.length-1;c>=0;c--)d=g[c],d.specified!==!1&&(e=d.name,h.hasOwnProperty(e)||a.removeAttribute(e))}function e(a,b){for(var c=a.firstChild;c;){var d=c.nextSibling;b.appendChild(c),c=d}return b}function f(a){return a.id}function g(g,h,i){function j(a,b){var c=q(a);if(c?o[c]=a:b||r(a),1===a.nodeType)for(var d=a.firstChild;d;)j(d,b||c),d=d.nextSibling}function l(a){if(1===a.nodeType)for(var b=a.firstChild;b;)q(b)||(r(b),l(b)),b=b.nextSibling}function m(a,b,c){u(a)!==!1&&(b.removeChild(a),c?q(a)||(r(a),l(a)):j(a))}function n(a,b,c,e){var f=q(b);if(f&&delete o[f],!e){if(s(a,b)===!1)return;if(d(a,b),t(a,b)===!1)return}if("TEXTAREA"!=a.tagName){var g,h,i,j,l,r=b.firstChild,u=a.firstChild;a:for(;r;){for(i=r.nextSibling,g=q(r);u;){var v=q(u);if(h=u.nextSibling,!c&&v&&(l=p[v]))l.parentNode.replaceChild(u,l),n(u,l,c),u=h;else{var x=u.nodeType;if(x===r.nodeType){var y=!1;if(1===x?(u.tagName===r.tagName&&(v||g?g===v&&(y=!0):y=!0),y&&n(u,r,c)):3===x&&(y=!0,u.nodeValue=r.nodeValue),y){r=i,u=h;continue a}}m(u,a,c),u=h}}g&&((j=o[g])?(n(j,r,!0),r=j):p[g]=r),a.appendChild(r),1===r.nodeType&&(g||r.firstChild)&&w.push(r),r=i,u=h}for(;u;)h=u.nextSibling,m(u,a,c),u=h}var z=k[a.tagName];z&&z(a,b)}i||(i={}),"string"==typeof h&&(h=b(h));var o={},p={},q=i.getNodeKey||f,r=i.onNodeDiscarded||c,s=i.onBeforeMorphEl||c,t=i.onBeforeMorphElChildren||c,u=i.onBeforeNodeDiscarded||c,v=i.childrenOnly===!0,w=[],x=g,y=x.nodeType,z=h.nodeType;if(!v)if(1===y)1===z?g.tagName!==h.tagName&&(r(g),x=e(g,document.createElement(h.tagName))):x=h;else if(3===y){if(3===z)return x.nodeValue=h.nodeValue,x;x=h}if(x===h)r(g);else{n(x,h,!1,v);var A=function(b){for(var c=b.firstChild;c;){var d=c.nextSibling,e=q(c);if(e){var f=o[e];if(f&&c.tagName===f.tagName){if(c.parentNode.replaceChild(f,c),n(f,c,!0),c=d,a(o))return!1;continue}}1===c.nodeType&&A(c),c=d}};if(!a(o))a:for(;w.length;){var B=w;w=[];for(var C=0;C<B.length;C++)if(A(B[C])===!1)break a}for(var D in o)if(o.hasOwnProperty(D)){var E=o[D];r(E),l(E)}}return!v&&x!==g&&g.parentNode&&g.parentNode.replaceChild(x,g),x}var h,i="undefined"!=typeof document?document.body||document.createElement("div"):{},j;j=i.hasAttribute?function(a,b){return a.hasAttribute(b)}:function(a,b){return a.getAttributeNode(b)};var k={OPTION:function(a,b){(a.selected=b.selected)?a.setAttribute("selected",""):a.removeAttribute("selected","")},INPUT:function(a,b){a.checked=b.checked,a.value!=b.value&&(a.value=b.value),j(b,"checked")||a.removeAttribute("checked"),j(b,"value")||a.removeAttribute("value")},TEXTAREA:function(a,b){var c=b.value;a.value!=c&&(a.value=c),a.firstChild&&(a.firstChild.nodeValue=c)}};module.exports=g;
},{}],52:[function(require,module,exports){
"use strict";var a=["h","min","s","ms","μs","ns"],b=["hour","minute","second","millisecond","microsecond","nanosecond"],c=[3600,60,1,1e6,1e3,1];module.exports=function(d,e){var f,g,h,i,j,k,l,m,n;if(f=!1,g=!1,e&&(f=e.verbose||!1,g=e.precise||!1),!Array.isArray(d)||2!==d.length)return"";if("number"!=typeof d[0]||"number"!=typeof d[1])return"";for(n="",h=0;6>h&&(i=3>h?0:1,j=d[i],3!==h&&0!==h&&(j%=c[h-1]),2===h&&(j+=d[1]/1e9),k=j/c[h],!(k>=1)||(f&&(k=Math.floor(k)),g?m=k.toString():(l=k>=10?0:2,m=k.toFixed(l)),m.indexOf(".")>-1&&"0"===m[m.length-1]&&(m=m.replace(/\.?0+$/,"")),n&&(n+=" "),n+=m,f?(n+=" "+b[h],"1"!==m&&(n+="s")):n+=" "+a[h],f));h++);return n};
},{}],53:[function(require,module,exports){
function a(){g=!1,h.length?f=h.concat(f):i=-1,f.length&&b()}function b(){if(!g){var b=setTimeout(a);g=!0;for(var c=f.length;c;){for(h=f,f=[];++i<c;)h&&h[i].run();i=-1,c=f.length}h=null,g=!1,clearTimeout(b)}}function c(a,b){this.fun=a,this.array=b}function d(){}var e=module.exports={},f=[],g=!1,h,i=-1;e.nextTick=function(a){var d=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)d[e-1]=arguments[e];f.push(new c(a,d)),1!==f.length||g||setTimeout(b,0)},c.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")},e.umask=function(){return 0};
},{}],54:[function(require,module,exports){
"use strict";module.exports=require("./lib");
},{"./lib":59}],55:[function(require,module,exports){
"use strict";function a(){}function b(a){try{return a.then}catch(b){return o=b,p}}function c(a,b){try{return a(b)}catch(c){return o=c,p}}function d(a,b,c){try{a(b,c)}catch(d){return o=d,p}}function e(b){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,b!==a&&m(b,this)}function f(b,c,d){return new b.constructor(function(f,h){var i=new e(a);i.then(f,h),g(b,new l(c,d,i))})}function g(a,b){for(;3===a._81;)a=a._65;return e._10&&e._10(a),0===a._81?0===a._45?(a._45=1,void(a._54=b)):1===a._45?(a._45=2,void(a._54=[a._54,b])):void a._54.push(b):void h(a,b)}function h(a,b){n(function(){var d=1===a._81?b.onFulfilled:b.onRejected;if(null===d)return void(1===a._81?i(b.promise,a._65):j(b.promise,a._65));var e=c(d,a._65);e===p?j(b.promise,o):i(b.promise,e)})}function i(a,c){if(c===a)return j(a,new TypeError("A promise cannot be resolved with itself."));if(c&&("object"==typeof c||"function"==typeof c)){var d=b(c);if(d===p)return j(a,o);if(d===a.then&&c instanceof e)return a._81=3,a._65=c,void k(a);if("function"==typeof d)return void m(d.bind(c),a)}a._81=1,a._65=c,k(a)}function j(a,b){a._81=2,a._65=b,e._97&&e._97(a,b),k(a)}function k(a){if(1===a._45&&(g(a,a._54),a._54=null),2===a._45){for(var b=0;b<a._54.length;b++)g(a,a._54[b]);a._54=null}}function l(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function m(a,b){var c=!1,e=d(a,function(a){c||(c=!0,i(b,a))},function(a){c||(c=!0,j(b,a))});c||e!==p||(c=!0,j(b,o))}var n=require("asap/raw"),o=null,p={};module.exports=e,e._10=null,e._97=null,e._61=a,e.prototype.then=function(b,c){if(this.constructor!==e)return f(this,b,c);var d=new e(a);return g(this,new l(b,c,d)),d};
},{"asap/raw":9}],56:[function(require,module,exports){
"use strict";var a=require("./core.js");module.exports=a,a.prototype.done=function(a,b){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(a){setTimeout(function(){throw a},0)})};
},{"./core.js":55}],57:[function(require,module,exports){
"use strict";function a(a){var c=new b(b._61);return c._81=1,c._65=a,c}var b=require("./core.js");module.exports=b;var c=a(!0),d=a(!1),e=a(null),f=a(void 0),g=a(0),h=a("");b.resolve=function(i){if(i instanceof b)return i;if(null===i)return e;if(void 0===i)return f;if(i===!0)return c;if(i===!1)return d;if(0===i)return g;if(""===i)return h;if("object"==typeof i||"function"==typeof i)try{var j=i.then;if("function"==typeof j)return new b(j.bind(i))}catch(k){return new b(function(a,b){b(k)})}return a(i)},b.all=function(a){var c=Array.prototype.slice.call(a);return new b(function(a,d){function e(g,h){if(h&&("object"==typeof h||"function"==typeof h)){if(h instanceof b&&h.then===b.prototype.then){for(;3===h._81;)h=h._65;return 1===h._81?e(g,h._65):(2===h._81&&d(h._65),void h.then(function(a){e(g,a)},d))}var i=h.then;if("function"==typeof i){var j=new b(i.bind(h));return void j.then(function(a){e(g,a)},d)}}c[g]=h,0===--f&&a(c)}if(0===c.length)return a([]);for(var f=c.length,g=0;g<c.length;g++)e(g,c[g])})},b.reject=function(a){return new b(function(b,c){c(a)})},b.race=function(a){return new b(function(c,d){a.forEach(function(a){b.resolve(a).then(c,d)})})},b.prototype["catch"]=function(a){return this.then(null,a)};
},{"./core.js":55}],58:[function(require,module,exports){
"use strict";var a=require("./core.js");module.exports=a,a.prototype["finally"]=function(b){return this.then(function(c){return a.resolve(b()).then(function(){return c})},function(c){return a.resolve(b()).then(function(){throw c})})};
},{"./core.js":55}],59:[function(require,module,exports){
"use strict";module.exports=require("./core.js"),require("./done.js"),require("./finally.js"),require("./es6-extensions.js"),require("./node-extensions.js"),require("./synchronous.js");
},{"./core.js":55,"./done.js":56,"./es6-extensions.js":57,"./finally.js":58,"./node-extensions.js":60,"./synchronous.js":61}],60:[function(require,module,exports){
"use strict";function a(a,b){for(var d=[],f=0;b>f;f++)d.push("a"+f);var g=["return function ("+d.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(d).concat([e]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],g)(c,a)}function b(a){for(var b=Math.max(a.length-1,3),d=[],f=0;b>f;f++)d.push("a"+f);var g=["return function ("+d.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+b+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+e+";","var res;","switch (argLength) {",d.concat(["extra"]).map(function(a,b){return"case "+b+":res = fn.call("+["self"].concat(d.slice(0,b)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],g)(c,a)}var c=require("./core.js"),d=require("asap");module.exports=c,c.denodeify=function(c,d){return"number"==typeof d&&d!==1/0?a(c,d):b(c)};var e="function (err, res) {if (err) { rj(err); } else { rs(res); }}";c.nodeify=function(a){return function(){var b=Array.prototype.slice.call(arguments),e="function"==typeof b[b.length-1]?b.pop():null,f=this;try{return a.apply(this,arguments).nodeify(e,f)}catch(g){if(null===e||"undefined"==typeof e)return new c(function(a,b){b(g)});d(function(){e.call(f,g)})}}},c.prototype.nodeify=function(a,b){return"function"!=typeof a?this:void this.then(function(c){d(function(){a.call(b,null,c)})},function(c){d(function(){a.call(b,c)})})};
},{"./core.js":55,"asap":8}],61:[function(require,module,exports){
"use strict";var a=require("./core.js");module.exports=a,a.enableSynchronous=function(){a.prototype.isPending=function(){return 0==this.getState()},a.prototype.isFulfilled=function(){return 1==this.getState()},a.prototype.isRejected=function(){return 2==this.getState()},a.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},a.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},a.prototype.getState=function(){return 3===this._81?this._65.getState():-1===this._81||-2===this._81?0:this._81}},a.disableSynchronous=function(){a.prototype.isPending=void 0,a.prototype.isFulfilled=void 0,a.prototype.isRejected=void 0,a.prototype.getValue=void 0,a.prototype.getReason=void 0,a.prototype.getState=void 0};
},{"./core.js":55}],62:[function(require,module,exports){
module.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8};
},{}],63:[function(require,module,exports){
(function (process,global){
function a(a,d){var f={seen:[],stylize:c};return arguments.length>=3&&(f.depth=arguments[2]),arguments.length>=4&&(f.colors=arguments[3]),l(d)?f.showHidden=d:d&&exports._extend(f,d),r(f.showHidden)&&(f.showHidden=!1),r(f.depth)&&(f.depth=2),r(f.colors)&&(f.colors=!1),r(f.customInspect)&&(f.customInspect=!0),f.colors&&(f.stylize=b),e(f,a,f.depth)}function b(b,c){var d=a.styles[c];return d?"["+a.colors[d][0]+"m"+b+"["+a.colors[d][1]+"m":b}function c(a,b){return a}function d(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function e(a,b,c){if(a.customInspect&&b&&w(b.inspect)&&b.inspect!==exports.inspect&&(!b.constructor||b.constructor.prototype!==b)){var l=b.inspect(c,a);return p(l)||(l=e(a,l,c)),l}var m=f(a,b);if(m)return m;var n=Object.keys(b),o=d(n);if(a.showHidden&&(n=Object.getOwnPropertyNames(b)),v(b)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return g(b);if(0===n.length){if(w(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(s(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(u(b))return a.stylize(Date.prototype.toString.call(b),"date");if(v(b))return g(b)}var r="",t=!1,x=["{","}"];if(k(b)&&(t=!0,x=["[","]"]),w(b)){var y=b.name?": "+b.name:"";r=" [Function"+y+"]"}if(s(b)&&(r=" "+RegExp.prototype.toString.call(b)),u(b)&&(r=" "+Date.prototype.toUTCString.call(b)),v(b)&&(r=" "+g(b)),0===n.length&&(!t||0==b.length))return x[0]+r+x[1];if(0>c)return s(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var z;return z=t?h(a,b,c,o,n):n.map(function(d){return i(a,b,c,o,d,t)}),a.seen.pop(),j(z,r,x)}function f(a,b){if(r(b))return a.stylize("undefined","undefined");if(p(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return o(b)?a.stylize(""+b,"number"):l(b)?a.stylize(""+b,"boolean"):m(b)?a.stylize("null","null"):void 0}function g(a){return"["+Error.prototype.toString.call(a)+"]"}function h(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)B(b,String(g))?f.push(i(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(i(a,b,c,d,e,!0))}),f}function i(a,b,c,d,f,g){var h,i,j;if(j=Object.getOwnPropertyDescriptor(b,f)||{value:b[f]},j.get?i=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(i=a.stylize("[Setter]","special")),B(d,f)||(h="["+f+"]"),i||(a.seen.indexOf(j.value)<0?(i=m(c)?e(a,j.value,null):e(a,j.value,c-1),i.indexOf("\n")>-1&&(i=g?i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special")),r(h)){if(g&&f.match(/^\d+$/))return i;h=JSON.stringify(""+f),h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=a.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=a.stylize(h,"string"))}return h+": "+i}function j(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function k(a){return Array.isArray(a)}function l(a){return"boolean"==typeof a}function m(a){return null===a}function n(a){return null==a}function o(a){return"number"==typeof a}function p(a){return"string"==typeof a}function q(a){return"symbol"==typeof a}function r(a){return void 0===a}function s(a){return t(a)&&"[object RegExp]"===y(a)}function t(a){return"object"==typeof a&&null!==a}function u(a){return t(a)&&"[object Date]"===y(a)}function v(a){return t(a)&&("[object Error]"===y(a)||a instanceof Error)}function w(a){return"function"==typeof a}function x(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function y(a){return Object.prototype.toString.call(a)}function z(a){return 10>a?"0"+a.toString(10):a.toString(10)}function A(){var a=new Date,b=[z(a.getHours()),z(a.getMinutes()),z(a.getSeconds())].join(":");return[a.getDate(),F[a.getMonth()],b].join(" ")}function B(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var C=/%[sdj%]/g;exports.format=function(b){if(!p(b)){for(var c=[],d=0;d<arguments.length;d++)c.push(a(arguments[d]));return c.join(" ")}for(var d=1,e=arguments,f=e.length,g=String(b).replace(C,function(a){if("%%"===a)return"%";if(d>=f)return a;switch(a){case"%s":return String(e[d++]);case"%d":return Number(e[d++]);case"%j":try{return JSON.stringify(e[d++])}catch(b){return"[Circular]"}default:return a}}),h=e[d];f>d;h=e[++d])g+=m(h)||!t(h)?" "+h:" "+a(h);return g},exports.deprecate=function(a,b){function c(){if(!d){if(process.throwDeprecation)throw new Error(b);process.traceDeprecation?console.trace(b):console.error(b),d=!0}return a.apply(this,arguments)}if(r(global.process))return function(){return exports.deprecate(a,b).apply(this,arguments)};if(process.noDeprecation===!0)return a;var d=!1;return c};var D={},E;exports.debuglog=function(a){if(r(E)&&(E=process.env.NODE_DEBUG||""),a=a.toUpperCase(),!D[a])if(new RegExp("\\b"+a+"\\b","i").test(E)){var b=process.pid;D[a]=function(){var c=exports.format.apply(exports,arguments);console.error("%s %d: %s",a,b,c)}}else D[a]=function(){};return D[a]},exports.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=k,exports.isBoolean=l,exports.isNull=m,exports.isNullOrUndefined=n,exports.isNumber=o,exports.isString=p,exports.isSymbol=q,exports.isUndefined=r,exports.isRegExp=s,exports.isObject=t,exports.isDate=u,exports.isError=v,exports.isFunction=w,exports.isPrimitive=x,exports.isBuffer=require("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",A(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(a,b){if(!b||!t(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a};
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":62,"_process":53,"inherits":50}],64:[function(require,module,exports){
"use strict";module.exports=[{expression:"/:page[Main]",map:function(a){return console.warn("CALL MAP"),a}}];
},{}]},{},[2]);
